<div class="container mt-4">
  <h2 class="mb-4 text-center">Proyectos Revisados</h2>

  <div class="accordion" id="proyectosAccordion">
    <div class="accordion-item" *ngFor="let proyecto of proyectos; let i = index">
      <h2 class="accordion-header" id="heading{{ i }}">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                [attr.data-bs-target]="'#collapse' + i" aria-expanded="false"
                [attr.aria-controls]="'collapse' + i">
          <strong>{{ proyecto.NAME_PROYECT }}</strong>
          <span class="ms-3 badge" [ngClass]="getBadgeClass(proyecto.ESTADO)">
            <i [class]="getEstadoIcon(proyecto.ESTADO)" class="me-1"></i>
            {{ proyecto.ESTADO }}
          </span>
        </button>
      </h2>
      <div [id]="'collapse' + i" class="accordion-collapse collapse" 
           [attr.aria-labelledby]="'heading' + i" data-bs-parent="#proyectosAccordion">
        <div class="accordion-body">

          <!-- Datos generales en cards -->
          <div class="row g-3">
            <div class="col-md-6" *ngFor="let campo of getCamposProyecto(proyecto)">
              <div class="card">
                <div class="card-header fw-bold bg-light">{{ campo.titulo }}</div>
                <div class="card-body">
                  <p class="mb-0" style="white-space: pre-line;">{{ campo.contenido }}</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Tabla de criterios -->
          <div class="mt-4">
            <h5 class="mb-3">Criterios Evaluados</h5>
            <table class="table table-bordered table-striped text-center align-middle">
              <thead class="table-dark">
                <tr>
                  <th>Criterio</th>
                  <th>Evaluación</th>
                </tr>
              </thead>
             <tbody>
                <tr>
                    <td>Relación</td>
                    <td>
                    <i [class]="getCriterioIconoClase(proyecto.criterios[0]?.RELACION).icono"
                        [ngClass]="getCriterioIconoClase(proyecto.criterios[0]?.RELACION).color"
                        class="me-2"></i>
                    {{ proyecto.criterios[0]?.RELACION }}
                    </td>
                </tr>
                <tr>
                    <td>Extensión</td>
                    <td>
                    <i [class]="getCriterioIconoClase(proyecto.criterios[0]?.EXTENSION).icono"
                        [ngClass]="getCriterioIconoClase(proyecto.criterios[0]?.EXTENSION).color"
                        class="me-2"></i>
                    {{ proyecto.criterios[0]?.EXTENSION }}
                    </td>
                </tr>
                <tr>
                    <td>Diseño</td>
                    <td>
                    <i [class]="getCriterioIconoClase(proyecto.criterios[0]?.DISENO).icono"
                        [ngClass]="getCriterioIconoClase(proyecto.criterios[0]?.DISENO).color"
                        class="me-2"></i>
                    {{ proyecto.criterios[0]?.DISENO }}
                    </td>
                </tr>
                <tr>
                    <td>Análisis</td>
                    <td>
                    <i [class]="getCriterioIconoClase(proyecto.criterios[0]?.ANALISIS).icono"
                        [ngClass]="getCriterioIconoClase(proyecto.criterios[0]?.ANALISIS).color"
                        class="me-2"></i>
                    {{ proyecto.criterios[0]?.ANALISIS }}
                    </td>
                </tr>
                <tr>
                    <td>Forma</td>
                    <td>
                    <i [class]="getCriterioIconoClase(proyecto.criterios[0]?.FORMA).icono"
                        [ngClass]="getCriterioIconoClase(proyecto.criterios[0]?.FORMA).color"
                        class="me-2"></i>
                    {{ proyecto.criterios[0]?.FORMA }}
                    </td>
                </tr>
                <tr>
                    <td>Riesgos</td>
                    <td>
                    <i [class]="getCriterioIconoClase(proyecto.criterios[0]?.RIESGOS).icono"
                        [ngClass]="getCriterioIconoClase(proyecto.criterios[0]?.RIESGOS).color"
                        class="me-2"></i>
                    {{ proyecto.criterios[0]?.RIESGOS }}
                    </td>
                </tr>
                <tr>
                    <td>Recomendaciones</td>
                    <td>
                    <i class="bi bi-chat-left-text text-info me-2"></i>
                    {{ proyecto.criterios[0]?.RECOMENDACIONES }}
                    </td>
                </tr>
                </tbody>

            </table>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
